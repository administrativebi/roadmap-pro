# An√°lise: Banco de Dados Supabase vs Aplicativo (Next.js)

Realizamos uma varredura cruzada entre as tabelas existentes no Supabase (esquema `public`) e as telas/componentes desenvolvidos na pasta `app/` do Next.js. 

Aqui est√° o status atualizado de integra√ß√£o:

## üü¢ 1. Totalmente ou Parcialmente Integrados (Funcionando)

- **`sectors`**: 
  - **Telas**: `checklists`, `qrcodes`, `builder`
  - **Status**: Funcionando corretamente. Os setores filtram os checklists, servem para criar os QR Codes direcionados e j√° s√£o definidos na cria√ß√£o do checklist pelo Builder.
- **`checklist_templates` & `template_questions`**:
  - **Telas**: `builder`, `checklists`
  - **Status**: O *ChecklistBuilder* salva, edita e renderiza corretamente os JSONs avan√ßados de configura√ß√£o, relacionando com os setores do DB.
- **`checklists` & `checklist_responses`**:
  - **Telas**: `checklists/[id]`
  - **Status**: Execu√ß√£o em tempo real validada. Salvamento de notas (score), status final e dados em andamento (draft) funcionando.
- **`action_plans`**:
  - **Telas**: `action-plans`, `checklists/[id]`
  - **Status**: Gera√ß√£o autom√°tica j√° implementada no final da execu√ß√£o ao esbarrar em uma *N√£o Conformidade*. O painel [action-plans/page.tsx](file:///e:/Projetos/Rascunhos/RoadMap/app/%28app%29/action-plans/page.tsx) precisa apenas garantir a listagem correta dos items gerados para resolu√ß√£o.
- **`activity_logs`**:
  - **Telas**: Log inserido no `checklists/[id]`
  - **Status**: Os logs de sistema para ganhar pontos foram mapeados, sendo fundamental para o motor de gamifica√ß√£o. Falta ler na interface.

---

## üü° 2. Necessitam de Integra√ß√£o Visual e de L√≥gica (Pr√≥ximos Passos)

As tabelas de recursos cruciais, principalmente Gamifica√ß√£o e Recursos Sociais, j√° existem, mas as telas ainda operam no modo "Mock (Dados Fakes)" ou est√£o vazias:

### A. **Sistema de Perfis e Progress√£o (`profiles`, `user_badges`)**
- **Onde**: [profile/page.tsx](file:///e:/Projetos/Rascunhos/RoadMap/app/%28app%29/profile/page.tsx), Header (Avatar/N√≠vel)
- **O que falta**: 
  - Ler o total de XP da conta real.
  - Exibir as ins√≠gnias e trof√©us desbloqueados buscando de `user_badges`.
  - Mecanismo de subida de n√≠vel e avatar de acordo com os pontos ganhos logados no banco de dados.

### B. **Competi√ß√£o e Ligas (`seasons`, `season_leaderboard`)**
- **Onde**: [ranking/page.tsx](file:///e:/Projetos/Rascunhos/RoadMap/app/%28app%29/ranking/page.tsx)
- **O que falta**:
  - Consultar a tabela `seasons` para verificar qual √© a temporada atual ("Fevereiro 2026").
  - Atualizar o `ranking` agrupando os pontos dos colaboradores (usar filtros de setor se poss√≠vel). 
  - Definir quem ganha Ouro/Prata/Bronze a n√≠vel de banco de dados no final da season.

### C. **Miss√µes e Recompensas (`challenges`, `store_items`)**
- **Onde**: [dashboard/page.tsx](file:///e:/Projetos/Rascunhos/RoadMap/app/%28app%29/dashboard/page.tsx), [rewards/page.tsx](file:///e:/Projetos/Rascunhos/RoadMap/app/%28app%29/rewards/page.tsx)
- **O que falta**:
  - No dashboard ou perfil, listar as miss√µes tempor√°rias buscadas na tabela `challenges` e permitir o "resgate" (claim) se conclu√≠das.
  - Em Lojinha / Benef√≠cios (`rewards`), listar os pr√™mios f√≠sicos ou digitais da base `store_items` para permitir o d√©bito de XP real do usu√°rio em troca da recompensa.

### D. **Avalia√ß√µes Semanais de Desempenho (`collaborator_evaluations`, etc)**
- **Onde**: [evaluation/page.tsx](file:///e:/Projetos/Rascunhos/RoadMap/app/%28app%29/evaluation/page.tsx)
- **O que falta (Pedido Cr√≠tico)**: 
  - O gestor deve ser capaz de abrir o painel, escolher um colaborador e inserir as notas baseado na estrutura `evaluation_categories`. A plataforma precisa salvar isto frequentemente como solicitado na regra: *"Na avalia√ß√£o o respons√°vel precisa avaliar o colaborador uma vez por semana"*.

## üéØ Conclus√£o e Recomenda√ß√£o
O "Cora√ß√£o" do aplicativo (Criar Checklists -> Passar Checklists -> Gerar Planos de A√ß√£o) est√° consolidado e escrevendo em banco de dados real.

O pr√≥ximo gargalo mais l√≥gico para amarrarmos as pontas √© consolidar **A Avalia√ß√£o Semanal do Gestor** ou plugar a **Gamifica√ß√£o (Perfil/Lojinha e Ranking)** aos fluxos de XP.
